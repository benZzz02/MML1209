# ==============================================================================
# MML-SurgAdapt Configuration for DualCoCoOp Frozen (Efficient Tuning)
# ==============================================================================

# Training Settings
n_ctx: 4
checkpoint: cholec_vals
log_file: surgadapt_dualcocoop_frozen.txt
model_name: surgadapt_dualcocoop_frozen
# [显存策略] 冻结了 Backbone，显存占用很低，可以开大 Batch
batch_size: 10
accumulation_steps: 4      # 42 * 3 * 1 = 126
lr: 1e-5                   # [注意] 冻结骨干后，Prompt 的学习率通常可以稍微调大一点 (如 1e-4 或 1e-3)
epochs: 15
reweight_p: 0.2
relation_file: cholec/word2vec_similarity_matrix.npy
ratio: 1

# Prompt Learning Settings
child_n_ctx: 8

change_epoch: 1
tau: 0.6
image_size: 224
num_classes: 110
super_labels: cholec/cholec_super_labels.txt
super_labels_index: cholec/cholec_labels_index.npy
child_num: 110
label_file: label_jsons/data1.json
val_sp : True
val_methods : ['pp_map', 'pp_loss', 'sp_loss']
perform_init : False
init_train_file : triplet_train_labels.json
init_val_file : triplet_val_labels.json
init_epochs : 5
init_lr : 1e-5
dir : trial_dualcocoop_frozen
loss : Hill
use_lfile : False
getitem : False

# Model Architecture
backbone : ViT-L/14
seed: 0
partial: True
model: SurgAdaptDualCoCoOpFrozen # [关键] 使用冻结版

# Testing
ckpt: temp.ckpt
test_dir: trial_test_dualcocoop_frozen